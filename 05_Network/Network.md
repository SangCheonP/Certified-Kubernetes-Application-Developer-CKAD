# 🚀 Kubernetes 네트워크 통신 구조

## **📌 쿠버네티스에서 노드 & 파드 간 통신 개념**
쿠버네티스에서 **노드 간 통신**, **같은 노드 내 파드 간 통신**, **다른 노드의 파드 간 통신**에 대한 개념을 정리합니다.

---
<br>

## **1️⃣ 노드(Node) 간 통신**
### **✔ 노드끼리는 어떻게 통신할까?**
- 모든 노드는 **하나의 네트워크(VPC, 서브넷 등) 안에 존재**.
- 각 노드는 **고유한 IP를 가지고 직접 통신 가능**.
- 즉, **노드 간에는 추가적인 설정 없이 직접 네트워크 통신 가능**.

#### ✅ 예제 (노드 간 네트워크 연결 확인)
```sh
ping <다른 노드의 IP>
```

---
<br>

## **2️⃣ 같은 노드 안의 파드(Pod) 간 통신**
### **✔ 같은 노드 내에서 파드들이 통신하는 방법**
- **각 파드는 고유한 IP(파드 IP)를 가지고 있음**.
- 같은 노드 내에서는 **파드들이 가상 네트워크를 공유**하므로 직접 통신 가능.
- CNI(Flannel, Calico 등)를 사용하지 않아도 **동일한 노드 내에서는 파드 IP를 이용해 바로 연결 가능**.

#### ✅ 예제 (같은 노드 내 파드 간 통신 확인)
```sh
curl http://<같은 노드 내 다른 파드의 IP>:<포트번호>
```
> `kubectl get pods -o wide` 명령어로 파드 IP 확인 가능!

---
<br>

## **3️⃣ 다른 노드에 있는 파드(Pod) 간 통신**
### **✔ 노드가 다르면 어떻게 통신할까?**
- **각 노드의 네트워크는 다르지만, CNI가 이를 하나의 가상 네트워크로 연결해 줌**.
- CNI(Flannel, Calico 등)는 모든 노드의 파드들이 같은 네트워크에 있는 것처럼 구성.
- 따라서 **다른 노드에 있는 파드끼리도 CNI를 통해 직접 파드 IP로 통신 가능!**

#### ✅ 예제 (다른 노드의 파드와 통신 확인)
```sh
curl http://<다른 노드의 파드 IP>:<포트번호>
```
📌 **하지만 일반적으로 파드의 IP는 동적으로 변하기 때문에, 직접 IP를 사용하지 않고 `Service`를 이용하는 것이 일반적!**
(ex: `ClusterIP`, `NodePort`, `LoadBalancer` 등)

---
<br>

## **🚀 정리: 쿠버네티스 네트워크 통신 방식**
| 구분 | 통신 방식 | 설명 |
|------|----------|------|
| **노드 간 통신** | **각 노드의 IP로 직접 연결** | 노드끼리는 같은 네트워크(VPC, 서브넷 등)로 연결됨 |
| **같은 노드의 파드 간 통신** | **각자의 파드 IP로 직접 연결** | 같은 가상 네트워크에서 직접 통신 가능 |
| **다른 노드의 파드 간 통신** | **CNI(Flannel, Calico 등)를 통해 연결** | CNI가 가상 네트워크를 생성해 연결 |

📌 **한 마디로!**  
- **노드끼리는 직접 IP로 통신 가능**.  
- **같은 노드의 파드끼리는 같은 가상 네트워크를 공유하므로 직접 통신 가능**.  
- **다른 노드의 파드끼리는 CNI(Flannel, Calico 등)가 네트워크를 생성해서 연결**.  

